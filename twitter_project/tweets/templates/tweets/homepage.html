{% extends 'base.html' %}
{% block title %}Twitter{% endblock title %}
{% load static %}

{% block body %}
<script src="{% static "scripts/tweets/new_tweet.js" %}"></script>
<script src="{% static "scripts/tweets/tweet_list.js" %}"></script>
<link rel="stylesheet" href="{% static "styles/tweets/tweet_list.css" %}">
<link rel="stylesheet" href="{% static "styles/tweets/new_tweet.css" %}">


<div class="container">
    <div class="new-tweet">
        <img src={{ user.profile.profile_pic.url }} class="img-fluid profile-pic" width="40" height="40">
        <div class='new-tweet-input'>
            <span id='new-tweet-textarea' contenteditable="true"></span>
            <span id='new-tweet-placeholder' placeholder="What's happening?"></span>
        </div>
        <p></p>
        <div class="new-tweet-media">
            <span class='new-tweet-media-image'>IMG</span>
            <span class='new-tweet-media-gif'>GIF</span>
            <span class='new-tweet-media-poll'>POLL</span>
            <span class='new-tweet-media-emoji'>EMOJI</span>
        </div>
        <div class="new-tweet-extra">
            <div class="progress">
                <span class="progress-left">
                    <span class="progress-bar border-primary" id='new-tweet-bar-l'></span>
                </span>
                <span class="progress-right">
                    <span class="progress-bar border-primar" id="new-tweet-bar-r"></span>
                </span>
            </div>
            <span class='new-tweet-separator'>|</span>
            <input type="submit" class='btn btn-primary' value="+" , id='new-tweet-add'>
        </div>
        <input type='submit' class='btn btn-primary' value='Tweet' id='new-tweet-submit'>
    </div>
    <ul class="tweet-list">
        {% for tweet in tweet_list %}
        <li class='tweet-preview' tweet-id={{tweet.id}}>
            <img src={{ tweet.author.profile_pic.url }} class="img-fluid profile-pic" width="40" height="40">
            <div class="clickable-name">
                <a href="{% url 'profiles:profile' slug=tweet.author.slug%}">
                    {{tweet.author.display_name}}</a>
                <span class="tweet-username">@{{tweet.author.username}}</span>
            </div>
            <span class="tweet-date" utc={{tweet.date|date:"U" }}></span>

            <span class="tweet-text">{{tweet.text|linebreaks}}</span>

            {% comment %} Using "C", "R", "L" as placeholders for now {% endcomment %}
            <div class="action-btn comment-btn">
                <span class="tweet-comments-icon">C:</span>
                <span class="tweet-comments-num">{{tweet.comments}}</span>
            </div>
            <div class="action-btn rt-btn {% if tweet.is_rt %} is-rt {% endif %}">
                <span class="tweet-rts-icon">R:</span>
                <span class="tweet-rts-num">{{tweet.rts}}</span>
            </div>
            <div class="action-btn like-btn {% if tweet.is_liked %} is-liked {% endif %}">
                <span class="tweet-likes-icon">L:</span>
                <span class="tweet-likes-num">{{tweet.likes}}</span>
            </div>
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock body %}
